---
phase: 01-foundation
plan: 04
type: execute
wave: 1
depends_on: []
files_modified:
  - demo/buggy_web_game/index.html
  - demo/buggy_web_game/game.js
  - demo/buggy_web_game/README.md
  - scripts/serve_buggy_web_game.py
autonomous: true

must_haves:
  truths:
    - "A deterministic, locally runnable web game exists in-repo"
    - "The demo game has 2-3 explicit screens/states with large on-page labels (for Explorer screenshots)"
    - "There is a documented, deterministic bug path that triggers a Playwright pageerror/crash signal"
  artifacts:
    - path: "demo/buggy_web_game/index.html"
      provides: "Static target game entrypoint"
      contains: "Buggy Web Game"
    - path: "demo/buggy_web_game/game.js"
      provides: "Game logic with deterministic bug trigger"
      contains: "throw new Error"
    - path: "scripts/serve_buggy_web_game.py"
      provides: "Deterministic local server + quick self-check"
      contains: "--check"
  key_links:
    - from: "demo/buggy_web_game/README.md"
      to: "demo/buggy_web_game/game.js"
      via: "documents exact click sequence"
      pattern: "DEMO_CRASH"
---

<objective>
Add a tiny, deterministic, intentionally buggy web game in-repo so the system has a stable target from day one.

Purpose: Unblock FOUND-02 with a demo game that is automation-friendly and does not depend on external sites.
Output: `demo/buggy_web_game/` + a tiny local server script.
</objective>

<execution_context>
@/home/ubuntu/.config/opencode/get-shit-done/workflows/execute-plan.md
@/home/ubuntu/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md
@src/config/target_game.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create the buggy demo game with a deterministic crash path</name>
  <files>
demo/buggy_web_game/index.html
demo/buggy_web_game/game.js
demo/buggy_web_game/README.md
  </files>
  <action>
Create a tiny static HTML/JS game that is built to be automated.

 - UI: 2-3 explicit screens/states with large on-page labels (e.g. "TITLE", "PLAY", "CRASH") so screenshots are self-explanatory.
   - Include 2-3 large buttons per relevant screen and a visible on-page state log.
 - Deterministic bug path: document an exact click sequence that results in an uncaught exception (so Playwright emits `pageerror`).
   - Example: click sequence `START -> BOOST x7 -> FIRE` throws `new Error("DEMO_CRASH: ...")` without try/catch.
 - Keep everything static (no build step).
- In `demo/buggy_web_game/README.md`, include:
  - how to serve (the exact `python3 scripts/serve_buggy_web_game.py --port 4173` command)
  - exact bug trigger steps (button names + counts)
  - expected browser behavior (uncaught exception).
  </action>
  <verify>
python3 -c "import pathlib; assert pathlib.Path('demo/buggy_web_game/index.html').exists(); assert pathlib.Path('demo/buggy_web_game/game.js').exists()"
  </verify>
  <done>
Game assets exist and the README documents a deterministic crash trigger sequence.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add a local server script with a non-interactive self-check</name>
  <files>
scripts/serve_buggy_web_game.py
  </files>
  <action>
Implement `scripts/serve_buggy_web_game.py` using Python stdlib `http.server`.

- Default: serve `demo/buggy_web_game/` on `127.0.0.1:4173`.
- Add `--check` mode that:
  - starts the server on an ephemeral port in a background thread
  - performs one GET to `/` using stdlib `urllib.request`
  - asserts HTTP 200 and that the response contains the page title text
  - shuts the server down and exits 0.

This gives us a deterministic verification command without leaving a server running.
  </action>
  <verify>
python3 scripts/serve_buggy_web_game.py --check
  </verify>
  <done>
`--check` reliably verifies the game is serveable without manual steps.
  </done>
</task>

</tasks>

<verification>
- `python3 scripts/serve_buggy_web_game.py --check` exits 0.
- README documents the exact bug trigger sequence that produces an uncaught exception.
</verification>

<success_criteria>
- FOUND-02 unblocked: a deterministic local demo game exists and is the default target.
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-04-SUMMARY.md`
</output>
